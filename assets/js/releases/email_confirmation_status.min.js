"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=_superPropBase(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Events=function(){function e(){_classCallCheck(this,e),this.events=[],this.listeners={}}return _createClass(e,[{key:"define",value:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.events.includes(e[t])||(this.events.push(e[t]),this.listeners[e[t]]=[]);else e instanceof String||"string"==typeof e?(this.events.push(e),this.listeners[e]=[]):console.log("[Class Events] trying to define event from unknown type");return this}},{key:"add_listener",value:function(e,t){return this.events.includes(e)?this.listeners[e].push(t):console.log("[Class Events] trying to listen undefined event: "+e),this}},{key:"remove_listener",value:function(e,t){return this.events[e]&&(this.events.splice(this.events.indexOf(e),1),delete this.listeners[e]),this}},{key:"trigger",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if(this.listeners[e])for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n](t);else console.log("[Class Events]: try to trigger event: "+e);return this}},{key:"pipe",value:function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=null!=t?t:e.events;return this.define(t),t.forEach(function(t){return e.add_listener(t,function(e){return r.hasOwnProperty(t)?n.trigger(t,r[t](e)):void n.trigger(t,e)})}),this}},{key:"funnel",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.forEach(function(t){n.events.includes(t)?e.add_listener(t,function(e){return r.hasOwnProperty(t)?n.trigger(t,r[t](e)):void n.trigger(t,e)}):console.log("[Class Events]: try to funnel on undefined event: "+t)})}}]),e}(),HTML=function(){function e(){_classCallCheck(this,e),this.events=new Events}return _createClass(e,[{key:"auto_build",get:function(){return!0}},{key:"build",value:function(){}},{key:"html",value:function(){}}],[{key:"parse_element",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"div";if(e instanceof HTMLElement)return e;if(t instanceof String||"string"==typeof t){t=document.createElement(t);return t.innerHTML+=e,t}return null}},{key:"from_DOM",value:function(){}}]),e}(),TransitionedAction=function(){function r(e,t,n){_classCallCheck(this,r),this.events=new Events,this.events.define("action"),this.element=HTML.parse_element(e),this.cssEventType=t,this.class=n,this.listen()}return _createClass(r,[{key:"listen",value:function(){var t=this;this.element.addEventListener(this.cssEventType,function(e){e.target===t.element&&t.element.classList.contains(t.class)&&(e.stopPropagation(),t.events.trigger("action",t.element),t.element.classList.remove(t.class))},!1)}},{key:"transition",value:function(){this.element.classList.add(this.class)}}]),r}(),Molecules=function(){function e(){_classCallCheck(this,e),this.stack={}}return _createClass(e,[{key:"register",value:function(e,t){if(this.stack.hasOwnProperty(e))throw"Molecule with a name '"+e+"' was registered";this.stack[e]=t}},{key:"unregister",value:function(e){this.stack.hasOwnProperty(e)&&delete this.stack[e]}},{key:"replace",value:function(e,t){this.stack[e]=t}},{key:"class",value:function(e){if(this.stack.hasOwnProperty(e))return this.stack[e];throw"Unregistered molecule at '"+e+"'"}}]),e}();window.molecules=new Molecules;var Atoms=function(){function e(){_classCallCheck(this,e),this.stack={}}return _createClass(e,[{key:"register",value:function(e,t){if(this.stack.hasOwnProperty(e))throw"A atom with name '"+e+"' was registered";this.stack[e]=t}},{key:"unregister",value:function(e){this.stack.hasOwnProperty(e)&&delete this.stack[e]}},{key:"replace",value:function(e,t){this.stack[e]=t}},{key:"class",value:function(e){if(this.stack.hasOwnProperty(e))return this.stack[e];throw"Unregistered molecule at '"+e+"'"}}]),e}();window.atoms=new Atoms;var SlowlyRemovable=function(){_inherits(i,TransitionedAction);var r=_createSuper(i);function i(e,t){var n;return _classCallCheck(this,i),(n=r.call(this,e,t,"slowly-removable-remove")).events.define("removed"),n.events.add_listener("action",function(){n.element.remove(),n.events.trigger("removed",n.element)}),n}return _createClass(i,[{key:"remove",value:function(){this.element.classList.add("slowly-removable-remove")}}]),i}();function get_array_from_form_data(e){var t={},n=_createForOfIteratorHelper(e.entries());try{for(n.s();!(r=n.n()).done;){var r=r.value;t[r[0]]=r[1]}}catch(e){n.e(e)}finally{n.f()}return t}function get_form_data_from_array(e){if(e instanceof FormData)return e;var t,n=new FormData;for(t in e)e.hasOwnProperty(t)&&n.append(t,e[t]);return n}window.env.events=new Events,window.app={managers:{},events:new Events},FormData.prototype.to_object=function(){return get_array_from_form_data(this)},FormData.from_object=function(e){return get_form_data_from_array(e)},window.app.events=new Events,window.app.events.define(["vertical_resize","horizontal_resize"]);var currentHeight=window.innerHeight,currentWidth=window.innerWidth;window.addEventListener("resize",function(e){currentHeight!==(currentHeight=window.innerHeight)&&window.app.events.trigger("vertical_resize",e),currentWidth!==(currentWidth=window.innerWidth)&&window.app.events.trigger("horizontal_resize",e)},!1);var PageOverlay=function(){_inherits(n,HTML);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).z_index=2*window.project.page_overlay_count+++1,e.build(),e}return _createClass(n,[{key:"build",value:function(){var e=this;this.container=document.createElement("div"),this.container.className="".concat(env.APP_CSS_CLASS," page-overlay"),this.container.style.zIndex="calc(var(--page-overlay-z-index) + ".concat(this.z_index,")"),this.transitioned_hiding=new TransitionedAction(this.container,"transitionend","hide"),this.transitioned_hiding.events.add_listener("action",function(){e.container.classList.remove("active")}),this.remover=new SlowlyRemovable(this.container,"transitionend"),document.body.appendChild(this.container)}},{key:"show",value:function(){this.container.classList.add("active")}},{key:"hide",value:function(){this.transitioned_hiding.transition()}},{key:"remove",value:function(){--window.project.page_overlay_count,this.remover.remove()}}]),n}(),App=function(){function e(){_classCallCheck(this,e),this.events=new Events}return _createClass(e,[{key:"init",value:function(){var t=this;this.updateBodyHeight(),window.addEventListener("resize",function(e){t.updateBodyHeight(),t.updateVhProperty()},!1)}},{key:"run",value:function(){var t=this;window.addEventListener("DOMContentLoaded",function(e){t.init()},!1)}},{key:"updateBodyHeight",value:function(){document.body.style.height="".concat(window.innerHeight,"px"),document.documentElement.style.setProperty("--body-height","".concat(window.innerHeight,"px"))}},{key:"updateVhProperty",value:function(){document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px"))}}]),e}();window[window.env.APP_CSS_CLASS]={page_overlay_count:0,managers:{},events:new Events,errors:{}};var project=window[window.env.APP_CSS_CLASS];function common_mgr(e){var i="".concat(window.env.API_URL_BASE,"/api/admin/").concat(e.replace("_","-"));return{get:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return null};return project.managers.ajax.authenticated_request({url:i+"/get",type:"application/json",data:{_id:e}},t)},range:function(e){var t=e._factor,n=void 0===t?10:t,t=e._page,e=void 0===t?1:t,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return project.managers.ajax.authenticated_request({url:i+"/range",type:"application/json",data:{_factor:n,_page:e}},t)},search:function(e){var t=e._str,n=e._factor,r=void 0===n?10:n,n=e._page,e=void 0===n?1:n,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return project.managers.ajax.authenticated_request({url:i+"/search",type:"application/json",data:{_str:t,_factor:r,_page:e}},n)},add:function(e){var t=e._code,n=e._name,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return project.managers.ajax.authenticated_request({url:i+"/register",type:"application/json",data:{_code:t,_name:n}},e)},update:function(e,t){var n=t._code,r=t._name,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return project.managers.ajax.authenticated_request({url:i+"/update",type:"application/json",data:{_id:e,_code:n,_name:r}},t)},remove:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return null};return project.managers.ajax.authenticated_request({url:i+"/remove",type:"application/json",data:{_id:e}},t)}}}project.events.define(["logout"]);var Dpml=function(){_inherits(t,App);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"init",value:function(){_get(_getPrototypeOf(t.prototype),"init",this).call(this)}}]),t}(),Status=function(){_inherits(t,Dpml);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"init",value:function(){_get(_getPrototypeOf(t.prototype),"init",this).call(this)}}]),t}(),EmailConfirmationStatus=function(){_inherits(t,Status);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"init",value:function(){supr.init()}}]),t}(),email_confirmation_status=new EmailConfirmationStatus;email_confirmation_status.run();